<html>
 <head>
   <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css" />
   <link rel="stylesheet" href="style.css" />
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <script src="mustache.js"></script>
   <script src="FileSaver.min.js"></script>
  
   <meta name="viewport" content="width=device-width, initial-scale=1" />
 </head>
<body>
 <input id="tbTitre" type="text" />
 <input id="btnGen" type="submit" />
 <div id='core' />
 </body>
 <script>


/* Rendering functions */
function render_sections()
{
  var view = {
    sections: []
  };
  for(var iSection=1; iSection<=4; iSection++) {
    var section = {
      categories: [],
      sectionIdx: iSection
    };
    for(var iCategory=1; iCategory<=6; iCategory++)
    {
      var category = {
        details: [],
        categoryIdx: iCategory
      };
      for(var iDetail=1; iDetail<=6; iDetail++)
      {
        category.details.push(iDetail);
      }
      section.categories.push(category);
    }
    
    view.sections.push(section);
  }
  
  return Mustache.render("{{#sections}}<div class='section'>" +
                             "<div class='sectionTitle'>" +
                                 "<input id='section{{sectionIdx}}' type='text' class='sectionTextInput' />" +
                             "</div>" +
                             "{{#categories}}<div class='category'>" +
                                 "<div class='categoryTitle'>" + 
                                     "<img src='dice{{categoryIdx}}.png' class='categoryDice' />" +
                                     "<input id='sec{{sectionIdx}}_cat{{categoryIdx}}' type='text' class='categoryTextInput' />" +
                                 "</div>" +
                                 "{{#details}}<div class='categoryDetail'>" +
                                     "<img src='dice{{.}}.png' class='categoryDetailDice' />" + 
                                     "<input id='sec{{sectionIdx}}_cat{{categoryIdx}}_detail{{.}}' type='text' class='categoryDetailTextInput' />" +
                                 "</div>{{/details}}" +
                             "</div>{{/categories}}" +
                         "</div>{{/sections}}"
                         , view);
}

$(function() {
  $("#core").html(render_sections());
});
  </script>
</html>

