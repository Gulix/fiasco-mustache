<html>
 <head>
   <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css" />
   <link rel="stylesheet" href="style.css" />
   <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
   <script src="mustache.js"></script>
   <script src="FileSaver.min.js"></script>
  
   <meta name="viewport" content="width=device-width, initial-scale=1" />
 </head>
<body>
 <input id="tbTitre" type="text" />
 <input id="btnGen" type="submit" />
 <div id='core' />
 </body>
 <script>
$( "#btnGen" ).click(function() {

  var view = {
		title: $('#tbTitre').val()
	};
  var output = Mustache.render("Contenu {{title}} : Ã§a marche ?", view);
  var blob = new Blob([output], {type: "text/plain;charset=utf-8"});
  saveAs(blob, "generated.txt");
});

/* Rendering functions */
function render_category(category)
{
  var view = {
    category: category,
    details: []
  };
  for(var i=1; i<=6; i++) {
    view.details.push(i);
  }
  
  return Mustache.render("<div class='categoryTitle'><img src='dice{{category}}.png' class='categoryDice' /> <input id='cat{{category}}' type='text' class='categoryTextInput' /></div>"
                        + "{{#details}}<div class='categoryDetail'><img src='dice{{.}}.png' class='categoryDetailDice' /> <input id='cat{{category}}_detail{{.}}' type='text' class='categoryDetailTextInput' /></div>{{/details}}", view);
}

$(function() {
  $("#core").html(render_category(1));
});
  </script>
</html>

